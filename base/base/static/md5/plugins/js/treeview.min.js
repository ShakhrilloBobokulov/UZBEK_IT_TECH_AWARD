!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Treeview=t()}(this,(function(){"use strict";const e=e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e},t=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-mdb-no-jquery")?e:null};document.documentElement.dir;const n=e=>document.createElement(e),s=(()=>{const e={};let t=1;return{set(n,s,i){void 0===n[s]&&(n[s]={key:s,id:t},t++),e[n[s].id]=i},get(t,n){if(!t||void 0===t[n])return null;const s=t[n];return s.key===n?e[s.id]:null},delete(t,n){if(void 0===t[n])return;const s=t[n];s.key===n&&(delete e[s.id],delete t[n])}}})(),i={setData(e,t,n){s.set(e,t,n)},getData:(e,t)=>s.get(e,t),removeData(e,t){s.delete(e,t)}};function o(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function r(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const l={setDataAttribute(e,t,n){e.setAttribute(`data-mdb-${r(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-mdb-${r(t)}`)},getDataAttributes(e){if(!e)return{};const t={...e.dataset};return Object.keys(t).filter((e=>e.startsWith("mdb"))).forEach((e=>{let n=e.replace(/^mdb/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=o(t[e])})),t},getDataAttribute:(e,t)=>o(e.getAttribute(`data-mdb-${r(t)}`)),offset(e){const t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},position:e=>({top:e.offsetTop,left:e.offsetLeft}),style(e,t){Object.assign(e.style,t)},toggleClass(e,t){e&&(e.classList.contains(t)?e.classList.remove(t):e.classList.add(t))},addClass(e,t){e.classList.contains(t)||e.classList.add(t)},addStyle(e,t){Object.keys(t).forEach((n=>{e.style[n]=t[n]}))},removeClass(e,t){e.classList.contains(t)&&e.classList.remove(t)},hasClass:(e,t)=>e.classList.contains(t)};let a=Element.prototype.querySelectorAll,c=Element.prototype.querySelector;const d=(()=>{const e=new CustomEvent("Bootstrap",{cancelable:!0}),t=document.createElement("div");return t.addEventListener("Bootstrap",(()=>null)),e.preventDefault(),t.dispatchEvent(e),e.defaultPrevented})(),u=/:scope\b/;(()=>{const e=document.createElement("div");try{e.querySelectorAll(":scope *")}catch(t){return!1}return!0})()||(a=function(t){if(!u.test(t))return this.querySelectorAll(t);const n=Boolean(this.id);n||(this.id=e("scope"));let s=null;try{t=t.replace(u,`#${this.id}`),s=this.querySelectorAll(t)}finally{n||this.removeAttribute("id")}return s},c=function(e){if(!u.test(e))return this.querySelector(e);const t=h.call(this,e);return void 0!==t[0]?t[0]:null});const h=a,f=c,p={closest:(e,t)=>e.closest(t),matches:(e,t)=>e.matches(t),find:(e,t=document.documentElement)=>[].concat(...h.call(t,e)),findOne:(e,t=document.documentElement)=>f.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const n=[];let s=e.parentNode;for(;s&&s.nodeType===Node.ELEMENT_NODE&&3!==s.nodeType;)this.matches(s,t)&&n.push(s),s=s.parentNode;return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(this.matches(n,t))return[n];n=n.nextElementSibling}return[]}},m=t(),g=/[^.]*(?=\..*)\.|.*/,_=/\..*/,b=/::\d+$/,v={};let y=1;const E={mouseenter:"mouseover",mouseleave:"mouseout"},C=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function w(e,t){return t&&`${t}::${y++}`||e.uidEvent||y++}function O(e){const t=w(e);return e.uidEvent=t,v[t]=v[t]||{},v[t]}function k(e,t,n=null){const s=Object.keys(e);for(let i=0,o=s.length;i<o;i++){const o=e[s[i]];if(o.originalHandler===t&&o.delegationSelector===n)return o}return null}function L(e,t,n){const s="string"==typeof t,i=s?n:t;let o=e.replace(_,"");const r=E[o];r&&(o=r);return C.indexOf(o)>-1||(o=e),[s,i,o]}function I(e,t,n,s,i){if("string"!=typeof t||!e)return;n||(n=s,s=null);const[o,r,l]=L(t,n,s),a=O(e),c=a[l]||(a[l]={}),d=k(c,r,o?n:null);if(d)return void(d.oneOff=d.oneOff&&i);const u=w(r,t.replace(g,"")),h=o?function(e,t,n){return function s(i){const o=e.querySelectorAll(t);for(let{target:t}=i;t&&t!==this;t=t.parentNode)for(let r=o.length;r--;"")if(o[r]===t)return s.oneOff&&D.off(e,i.type,n),n.apply(t,[i]);return null}}(e,n,s):function(e,t){return function n(s){return n.oneOff&&D.off(e,s.type,t),t.apply(e,[s])}}(e,n);h.delegationSelector=o?n:null,h.originalHandler=r,h.oneOff=i,h.uidEvent=u,c[u]=h,e.addEventListener(l,h,o)}function A(e,t,n,s,i){const o=k(t[n],s,i);o&&(e.removeEventListener(n,o,Boolean(i)),delete t[n][o.uidEvent])}const D={on(e,t,n,s){I(e,t,n,s,!1)},one(e,t,n,s){I(e,t,n,s,!0)},off(e,t,n,s){if("string"!=typeof t||!e)return;const[i,o,r]=L(t,n,s),l=r!==t,a=O(e),c="."===t.charAt(0);if(void 0!==o){if(!a||!a[r])return;return void A(e,a,r,o,i?n:null)}c&&Object.keys(a).forEach((n=>{!function(e,t,n,s){const i=t[n]||{};Object.keys(i).forEach((o=>{if(o.indexOf(s)>-1){const s=i[o];A(e,t,n,s.originalHandler,s.delegationSelector)}}))}(e,a,n,t.slice(1))}));const d=a[r]||{};Object.keys(d).forEach((n=>{const s=n.replace(b,"");if(!l||t.indexOf(s)>-1){const t=d[n];A(e,a,r,t.originalHandler,t.delegationSelector)}}))},trigger(e,t,n){if("string"!=typeof t||!e)return null;const s=t.replace(_,""),i=t!==s,o=C.indexOf(s)>-1;let r,l=!0,a=!0,c=!1,u=null;return i&&m&&(r=m.Event(t,n),m(e).trigger(r),l=!r.isPropagationStopped(),a=!r.isImmediatePropagationStopped(),c=r.isDefaultPrevented()),o?(u=document.createEvent("HTMLEvents"),u.initEvent(s,l,!0)):u=new CustomEvent(t,{bubbles:l,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((e=>{Object.defineProperty(u,e,{get:()=>n[e]})})),c&&(u.preventDefault(),d||Object.defineProperty(u,"defaultPrevented",{get:()=>!0})),a&&e.dispatchEvent(u),u.defaultPrevented&&void 0!==r&&r.preventDefault(),u}},S=37,x=38,T=39,M=40,j=36,$=35,U=13,N="treeview",H="mdb.treeview",P='input[type="checkbox"]',B="show",K="active",q="treeview-category",z="treeview-disabled",G=["primary","secondary","warning","success","info","danger","light","dark"],Q={structure:"(null|array)",openOnClick:"boolean",selectable:"boolean",accordion:"boolean",rotationAngle:"number",treeviewColor:"string",line:"boolean",treeviewDuration:"(null|number)"},R={structure:null,openOnClick:!0,selectable:!1,accordion:!1,rotationAngle:90,treeviewColor:"primary",line:!1,treeviewDuration:null};class J{constructor(e,t){this._element=e,this._element&&i.setData(e,H,this),this._options=this._getConfig(t),this._innerLists=[],this._stringCollection=new Map,this._init(),this._checkboxes=p.find(P,this._mainList),this._listElements=p.find("li",this._mainList)}static get NAME(){return N}get parsedDOM(){return this._parseDOM(this._element)}get selectedItems(){return p.find(P,this._mainList).filter((e=>e.checked)).map((e=>{const[t]=p.parents(e,"li");return t}))}dispose(){i.removeData(this._element,H),this._checkboxes.forEach((e=>{D.off(e,"change"),D.off(e,"mousedown")})),this._listElements.forEach((e=>{D.off(e,"click"),D.off(e,"mouseover"),D.off(e,"mouseout"),D.off(e,"keydown")})),this._innerLists.forEach((e=>{e.collapse.dispose();const[t]=p.parents(e.toggler,"a");D.off(t,"click")})),this._element=null}collapse(){p.find("ul",this._mainList).forEach((e=>{if(l.hasClass(e,B)){const{collapse:t}=this._getInnerList(e);t.hide()}}))}expand(e){const t=p.findOne(`#${e}`,this._mainList);[t,...p.parents(t,'ul:not([role="tree"])')].forEach((e=>{if(!l.hasClass(e,B)){const{collapse:t}=this._getInnerList(e);t.show()}}))}filter(e){this.collapse(),setTimeout((()=>{this._stringCollection.forEach(((t,n)=>{const s=this._normalize(e);if(this._normalize(t).includes(s)){let e;l.hasClass(n,q)?[e]=p.parents(n,"ul"):e=p.findOne("ul",n);const t=l.hasClass(e,B),s=p.children(n,"ul").length>0;if(!t&&s){const t=e.getAttribute("id");this.expand(t)}}}))}),351)}_init(){const{initMDB:e,Collapse:t}=mdb;e({Collapse:t}),this._options.structure?this._initJS():this._initDOM(),D.on(this._element,"keydown",(e=>{const{keyCode:t}=e;9!==t&&t===M&&(e.preventDefault(),this._handleHomeKey())}))}_initJS(){this._generateMainList(),l.addClass(this._element,"treeview"),this._options.structure.forEach((e=>this._generateTree(e,this._mainList))),this._initDOM()}_initDOM(){this._setupMainList(),this.parsedDOM.forEach((e=>this._setupTree(e,1,this._mainList))),this._setupUIElement(this._element,{tabindex:"0"}),this._options.treeviewColor&&this._setupColors()}_setupColors(){const e=G.includes(this._options.treeviewColor)?`treeview-${this._options.treeviewColor}`:"treeview-primary";return l.addClass(this._element,e)}_getInnerList(e){return this._innerLists.find((t=>t.element===e))}_generateTree(e,t){const{name:s,children:i,show:o,id:r,icon:a,disabled:c}=e,d=n("li");i?this._generateGroupItem({li:d,name:s,children:i,show:o,id:r,icon:a,disabled:c}):(c&&l.addClass(d,z),d.innerHTML=s,r&&this._setupUIElement(d,{id:r})),t.appendChild(d)}_generateGroupItem({li:e,name:t,children:s,show:i,id:o,icon:r,disabled:a}){const c=n("a"),d=n("ul");if(c.innerHTML=t,a&&l.addClass(c,z),e.appendChild(c),e.appendChild(d),i&&l.addClass(d,B),o&&this._setupUIElement(d,{id:o}),r){const e=n("span");this._setupUIElement(e,{"aria-label":"toggle"}),e.innerHTML=r,c.insertBefore(e,c.firstChild)}s.forEach((e=>this._generateTree(e,d)))}_generateMainList(){this._mainList=n("ul"),this._element.appendChild(this._mainList)}_setupMainList(){this._mainList=p.findOne("ul",this._element),this._setupUIElement(this._mainList,{role:"tree"})}_setupTree(e,t,n){const{node:s,children:i}=e;this._setupTreeItem(s,t),this._setupUIElement(s,{tabindex:"-1"}),i.length>0&&this._setupGroupItem(s,i,t,n)}_setupTreeItem(e,t){this._setupUIElement(e,{"aria-level":t,role:"tree-item"}),this._options.selectable&&this._setupCheckbox(e);const n=this._getSelector(e);l.addClass(n,q),D.on(e,"keydown",(t=>this._handleKeyboardNavigation(t,e))),l.hasClass(n,z)||D.on(n,"click",(e=>this._handleItemClick(e,n)))}_setupGroupItem(t,n,s,i){const o=p.findOne("a",t),r=p.findOne("ul",t);let a;this._options.line&&l.addClass(r,"treeview-line"),a=r.hasAttribute("id")?r.getAttribute("id"):e("level-");const c=this._setupToggler(a,o);this._setupUIElement(r,{id:a,role:"group"}),this._setupUIElement(o,{role:"button",tabindex:"-1"}),this._setupCollapse(r,c,i),n.forEach((e=>this._setupTree(e,s+1,r)))}_setupCollapse(e,t,n){const s=l.hasClass(e,B);l.removeClass(e,B);const i=new mdb.Collapse(e,{parent:this._options.accordion?n:"",toggle:s});s&&this._rotateIcon(t,90),D.on(e,"show.bs.collapse",(e=>{e.stopPropagation(),this._rotateIcon(t,this._options.rotationAngle)})),D.on(e,"hide.bs.collapse",(n=>{n.stopPropagation(),this._rotateIcon(t,0),p.find("ul",e).forEach((e=>{mdb.Collapse.getInstance(e).hide()}))})),this._innerLists.push({element:e,collapse:i,toggler:t})}_createCheckbox(){const e=n("input");return this._setupUIElement(e,{type:"checkbox","data-mdb-collapse-init":""},["mx-1","form-check-input"]),e}_setupCheckbox(e){const t=this._createCheckbox(),n=this._getSelector(e);if(l.hasClass(n,z)){t.setAttribute("disabled",!0);p.find("li",e).forEach((e=>{const t=this._getSelector(e);l.addClass(t,z)}))}"A"===n.nodeName&&l.style(n,{marginLeft:"-1rem"}),n.insertBefore(t,n.firstChild),D.on(t,"mousedown",(t=>this._handleInputChange(t,e))),D.on(t,"change",(t=>this._handleInputChange(t,e)))}_handleKeyboardNavigation(e,t){const{keyCode:n}=e;if([x,M,U,j,$,T,S].includes(n)&&(e.stopPropagation(),9!==n))switch(e.preventDefault(),n){case U:this._handleEnterKey(t);break;case j:this._handleHomeKey();break;case $:{const e=p.children(this._mainList,"li"),t=e[e.length-1];this._handleEndKey(t);break}case T:this._handleRightArrow(t);break;case S:this._handleLeftArrow(t);break;case M:this._handleDownArrow(t);break;case x:this._handleUpArrow(t);break;default:return}}_handleHomeKey(){const e=p.findOne("li",this._mainList);this._getSelector(e).focus()}_handleRightArrow(e){const t=p.findOne("ul",e);if(t){const e=t.getAttribute("id");this.expand(e)}}_handleLeftArrow(e){const t=p.findOne("ul",e);if(t){const{collapse:e}=this._getInnerList(t);e.hide()}}_handleEndKey(e){const t=p.findOne("ul",e);let n=e;if(t&&l.hasClass(t,B)){const e=p.children(t,"li"),s=e[e.length-1];n=s,this._handleEndKey(s)}else{this._getSelector(n).focus()}}_handleEnterKey(e){const t=this._getSelector(e);if(l.hasClass(t,z))return;p.find("li",this._mainList).forEach((e=>{l.removeClass(e,K);const t=p.findOne("a",e);t&&l.removeClass(t,K)})),l.addClass(t,K)}_handleUpArrow(e){const[t]=p.prev(e,"li");if(!t){const[t]=p.parents(e,"li");if(!t)return;return void this._getSelector(t).focus()}const n=p.findOne("ul",t);if(n&&l.hasClass(n,B)){const e=p.children(n,"li");return void e[e.length-1].focus()}this._getSelector(t).focus()}_handleDownArrow(e){let t;const n=p.findOne("ul",e);if(n)if(l.hasClass(n,B)){if(t=p.findOne("li",n),!t)return;this._getSelector(t).focus()}else{if([t]=p.next(e,"li"),!t)return;this._getSelector(t).focus()}else{if([t]=p.next(e,"li"),!t){const[t]=p.parents(e,"li"),[n]=p.next(t,"li");if(!n)return;return void this._getSelector(n).focus()}this._getSelector(t).focus()}}_handleInputChange(e,t){let n=e.target.checked;""===l.getDataAttributes(e.target.parentNode).mdbCollapseInit&&(n=!n);p.find(P,t).forEach((e=>{e.disabled||(e.checked=n)}));const s=p.parents(t,"li"),[i]=s,o=p.findOne(P,i);i&&!o.checked&&n&&s.forEach((e=>{const t=p.findOne(P,e);p.find(P,e).every(((e,t)=>0===t||e.checked))&&(t.checked=!0)})),i&&o.checked&&!n&&s.forEach((e=>{p.findOne(P,e).checked=!1})),D.trigger(this._element,"itemSelected.mdb.treeview",{items:this.selectedItems})}_handleItemClick(e,t){e.stopPropagation();p.find("li",this._mainList).forEach((e=>{l.removeClass(e,K);const t=p.findOne("a",e);t&&l.removeClass(t,K)})),l.addClass(t,K),D.trigger(this._element,"itemActive.mdb.treeview",{item:t})}_setupToggler(e,t){const n=p.findOne('span[aria-label="toggle"]',t);if(n){const s=this._options.openOnClick?t:n;return l.setDataAttribute(s,"collapseInit",""),this._setupUIElement(s,{"data-mdb-collapse-init":"","data-mdb-target":`#${e}`}),n}return this._createToggler(e,t)}_createToggler(e,t){const s=n("span"),i=this._options.openOnClick?t:s;return this._setupUIElement(s,{"aria-label":"toggle"}),s.innerHTML='<i class="fas fa-angle-right mx-1"></i>',l.setDataAttribute(i,"collapseInit",""),this._setupUIElement(i,{"data-mdb-collapse-init":"","data-mdb-target":`#${e}`}),t.insertBefore(s,t.firstChild),s}_parseDOM(e){const[t]=p.children(e,"ul");return t?p.children(t,"li").map((e=>{const t=this._parseDOM(e),n={name:e.innerText?e.innerText.split("\n")[0]:"",node:e,children:t};if(n.children.length>0){const t=p.findOne("a",e);n.name=t.innerText?t.innerText.split("\n")[0]:""}return this._stringCollection.set(n.node,n.name),n})):[]}_rotateIcon(e,t){const n=p.findOne("i",e);n&&l.style(n,{transform:`rotate(${t}deg)`})}_setupUIElement(e,t={},n=[]){Object.keys(t).forEach((n=>{const s=t[n];e.setAttribute(n,s)})),n.forEach((t=>{l.addClass(e,t)}))}_getSelector(e){return p.findOne("a",e)||e}_normalize(e){return e.trim().toLowerCase()}_getConfig(e){const t={...R,...l.getDataAttributes(this._element),...e};return((e,t,n)=>{Object.keys(n).forEach((s=>{const i=n[s],o=t[s],r=o&&((l=o)[0]||l).nodeType?"element":(e=>null==e?`${e}`:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase())(o);var l;if(!new RegExp(i).test(r))throw new Error(`${e.toUpperCase()}: Option "${s}" provided type "${r}" but expected type "${i}".`)}))})(N,t,Q),t}static getInstance(e){return i.getData(e,H)}static jQueryInterface(e){return this.each((function(){let t=i.getData(this,H);if(t||(t=new J(this,"object"==typeof e&&e)),"string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}var W;return p.find("[data-mdb-treeview-init]").forEach((e=>{let t=J.getInstance(e);return t||(t=new J(e)),t})),W=()=>{const e=t();if(e){const t=e.fn[N];e.fn[N]=J.jQueryInterface,e.fn[N].Constructor=J,e.fn[N].noConflict=()=>(e.fn[N]=t,J.jQueryInterface)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",W):W(),J}));
//# sourceMappingURL=treeview.min.js.map
