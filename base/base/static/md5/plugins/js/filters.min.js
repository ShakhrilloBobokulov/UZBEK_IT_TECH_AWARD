!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Filters=e()}(this,(function(){"use strict";const t=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-mdb-no-jquery")?t:null};document.documentElement.dir;const e=(()=>{const t={};let e=1;return{set(r,n,s){void 0===r[n]&&(r[n]={key:n,id:e},e++),t[r[n].id]=s},get(e,r){if(!e||void 0===e[r])return null;const n=e[r];return n.key===r?t[n.id]:null},delete(e,r){if(void 0===e[r])return;const n=e[r];n.key===r&&(delete t[n.id],delete e[r])}}})(),r={setData(t,r,n){e.set(t,r,n)},getData:(t,r)=>e.get(t,r),removeData(t,r){e.delete(t,r)}};function n(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function s(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const i={setDataAttribute(t,e,r){t.setAttribute(`data-mdb-${s(e)}`,r)},removeDataAttribute(t,e){t.removeAttribute(`data-mdb-${s(e)}`)},getDataAttributes(t){if(!t)return{};const e={...t.dataset};return Object.keys(e).filter((t=>t.startsWith("mdb"))).forEach((t=>{let r=t.replace(/^mdb/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=n(e[t])})),e},getDataAttribute:(t,e)=>n(t.getAttribute(`data-mdb-${s(e)}`)),offset(t){const e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},position:t=>({top:t.offsetTop,left:t.offsetLeft}),style(t,e){Object.assign(t.style,e)},toggleClass(t,e){t&&(t.classList.contains(e)?t.classList.remove(e):t.classList.add(e))},addClass(t,e){t.classList.contains(e)||t.classList.add(e)},addStyle(t,e){Object.keys(e).forEach((r=>{t.style[r]=e[r]}))},removeClass(t,e){t.classList.contains(e)&&t.classList.remove(e)},hasClass:(t,e)=>t.classList.contains(e)};let o=Element.prototype.querySelectorAll,l=Element.prototype.querySelector;const a=(()=>{const t=new CustomEvent("Bootstrap",{cancelable:!0}),e=document.createElement("div");return e.addEventListener("Bootstrap",(()=>null)),t.preventDefault(),e.dispatchEvent(t),t.defaultPrevented})(),c=/:scope\b/;(()=>{const t=document.createElement("div");try{t.querySelectorAll(":scope *")}catch(e){return!1}return!0})()||(o=function(t){if(!c.test(t))return this.querySelectorAll(t);const e=Boolean(this.id);e||(this.id=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})("scope"));let r=null;try{t=t.replace(c,`#${this.id}`),r=this.querySelectorAll(t)}finally{e||this.removeAttribute("id")}return r},l=function(t){if(!c.test(t))return this.querySelector(t);const e=u.call(this,t);return void 0!==e[0]?e[0]:null});const u=o,f=l,d={closest:(t,e)=>t.closest(e),matches:(t,e)=>t.matches(e),find:(t,e=document.documentElement)=>[].concat(...u.call(e,t)),findOne:(t,e=document.documentElement)=>f.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const r=[];let n=t.parentNode;for(;n&&n.nodeType===Node.ELEMENT_NODE&&3!==n.nodeType;)this.matches(n,e)&&r.push(n),n=n.parentNode;return r},prev(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return[r];r=r.previousElementSibling}return[]},next(t,e){let r=t.nextElementSibling;for(;r;){if(this.matches(r,e))return[r];r=r.nextElementSibling}return[]}},h=t(),p=/[^.]*(?=\..*)\.|.*/,m=/\..*/,g=/::\d+$/,y={};let b=1;const _={mouseenter:"mouseover",mouseleave:"mouseout"},v=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function E(t,e){return e&&`${e}::${b++}`||t.uidEvent||b++}function O(t){const e=E(t);return t.uidEvent=e,y[e]=y[e]||{},y[e]}function D(t,e,r=null){const n=Object.keys(t);for(let s=0,i=n.length;s<i;s++){const i=t[n[s]];if(i.originalHandler===e&&i.delegationSelector===r)return i}return null}function A(t,e,r){const n="string"==typeof e,s=n?r:e;let i=t.replace(m,"");const o=_[i];o&&(i=o);return v.indexOf(i)>-1||(i=t),[n,s,i]}function S(t,e,r,n,s){if("string"!=typeof e||!t)return;r||(r=n,n=null);const[i,o,l]=A(e,r,n),a=O(t),c=a[l]||(a[l]={}),u=D(c,o,i?r:null);if(u)return void(u.oneOff=u.oneOff&&s);const f=E(o,e.replace(p,"")),d=i?function(t,e,r){return function n(s){const i=t.querySelectorAll(e);for(let{target:e}=s;e&&e!==this;e=e.parentNode)for(let o=i.length;o--;"")if(i[o]===e)return n.oneOff&&k.off(t,s.type,r),r.apply(e,[s]);return null}}(t,r,n):function(t,e){return function r(n){return r.oneOff&&k.off(t,n.type,e),e.apply(t,[n])}}(t,r);d.delegationSelector=i?r:null,d.originalHandler=o,d.oneOff=s,d.uidEvent=f,c[f]=d,t.addEventListener(l,d,i)}function j(t,e,r,n,s){const i=D(e[r],n,s);i&&(t.removeEventListener(r,i,Boolean(s)),delete e[r][i.uidEvent])}const k={on(t,e,r,n){S(t,e,r,n,!1)},one(t,e,r,n){S(t,e,r,n,!0)},off(t,e,r,n){if("string"!=typeof e||!t)return;const[s,i,o]=A(e,r,n),l=o!==e,a=O(t),c="."===e.charAt(0);if(void 0!==i){if(!a||!a[o])return;return void j(t,a,o,i,s?r:null)}c&&Object.keys(a).forEach((r=>{!function(t,e,r,n){const s=e[r]||{};Object.keys(s).forEach((i=>{if(i.indexOf(n)>-1){const n=s[i];j(t,e,r,n.originalHandler,n.delegationSelector)}}))}(t,a,r,e.slice(1))}));const u=a[o]||{};Object.keys(u).forEach((r=>{const n=r.replace(g,"");if(!l||e.indexOf(n)>-1){const e=u[r];j(t,a,o,e.originalHandler,e.delegationSelector)}}))},trigger(t,e,r){if("string"!=typeof e||!t)return null;const n=e.replace(m,""),s=e!==n,i=v.indexOf(n)>-1;let o,l=!0,c=!0,u=!1,f=null;return s&&h&&(o=h.Event(e,r),h(t).trigger(o),l=!o.isPropagationStopped(),c=!o.isImmediatePropagationStopped(),u=o.isDefaultPrevented()),i?(f=document.createEvent("HTMLEvents"),f.initEvent(n,l,!0)):f=new CustomEvent(e,{bubbles:l,cancelable:!0}),void 0!==r&&Object.keys(r).forEach((t=>{Object.defineProperty(f,t,{get:()=>r[t]})})),u&&(f.preventDefault(),a||Object.defineProperty(f,"defaultPrevented",{get:()=>!0})),c&&t.dispatchEvent(f),f.defaultPrevented&&void 0!==o&&o.preventDefault(),f}},I="filters",L="mdb.filters",w={items:null,autoFilter:!1},C={items:"string || array",autoFilter:"boolean"};class M{constructor(t,e){this._element=t,this._element&&r.setData(t,L,this),this._options=this._getConfig(e),this.DOMElements=Array.isArray(this._options.items)?null:d.find(this._options.items),this._setupInputsHandler=this._setupInputs.bind(this),this.sortProperty=null,this.sortOrder="asc",this.customSort=null,this._filters=null,this.DOMElements&&([this._parent]=d.parents(this.DOMElements[0],"*")),this._init()}static get NAME(){return I}get computedItems(){const t=this.DOMElements||this._options.items;return this._sort(this._filter(t))}get filterKeys(){return Object.keys(this._filters)}filter(t){this._filters={...this._filters,...t},this._updateItems()}sort(t,e="asc",r){this.sortProperty=t,this.sortOrder=e,this.customSort=r,this._updateItems()}getFilters(){return this._availableFilters}getActiveFilters(){return this._filters}clear(){this._filters={},this.filter(this._filters),this._inputs.forEach((t=>{t.checked=!1})),this._updateItems()}dispose(){this._inputs.forEach((t=>{k.off(t,"change",this._setupInputsHandler)})),r.removeData(this._element,L),this._element=null}_init(){this._inputs=d.find("input",this._element),this._filters={},this._availableFilters=this._setAvailableFilters(),this._options.autoFilter&&this._setupInputs(),this._inputs.forEach((t=>{k.on(t,"change",this._setupInputsHandler)}))}_updateItems(){this.DOMElements&&(this.DOMElements.forEach((t=>{t.parentNode===this._parent&&this._parent.removeChild(t)})),this.computedItems.forEach((t=>{this._parent.appendChild(t)})));const t=this.computedItems;return k.trigger(this._element,"update.mdb.filters",{items:t}),t}_filter(t){if(!this._filters)return t;const e=t=>this.DOMElements?this._getDataObject(t):t;return t.filter((t=>this._filterHandler(e(t))))}_getDataObject(t){const e=i.getDataAttributes(t),r=Object.keys(e),n={};for(let s=0;s<r.length;s++){const t=r[s],i=e[t];let o=i;"string"==typeof i&&i.match(/\[.*?\]/)?o=JSON.parse(i.replaceAll("'",'"')).map((t=>t.toString())):isNaN(parseInt(i,10))||(o=parseInt(i,10)),n[t]=o}return n}_filterHandler(t){for(let e=0;e<this.filterKeys.length;e++){const r=this.filterKeys[e],n=this._filters[r],s=t[r];if("function"!=typeof n){if(Array.isArray(s)){if(!((t,e)=>t.filter((t=>e.includes(t))).length>0)(n,s))return!1}else if(!n.includes(s))return!1}else if(!1===n(s))return!1}return!0}_sort(t){if(!this.sortProperty)return t;const e=(t,e)=>this.customSort?this.customSort(t,e):("asc"===this.sortOrder?t>e:t<e)?1:("asc"===this.sortOrder?t<e:t>e)?-1:0;return this.DOMElements?t.sort(((t,r)=>{const n=i.getDataAttribute(t,this.sortProperty),s=i.getDataAttribute(r,this.sortProperty);return e(n,s)})):t.sort(((t,r)=>{const n=t[this.sortProperty],s=r[this.sortProperty];return e(n,s)}))}_setupInputs(){this._inputs.forEach((t=>{const[e]=d.parents(t,"[data-mdb-filter]");if(!e)return;const r=i.getDataAttribute(e,"filter");k.on(t,"change",(t=>this._inputHandler(t,r)))}))}_inputHandler(t,e){let r;const{type:n,value:s,checked:i}=t.target;return r="checkbox"===n?i?s:null:s,Array.isArray(this._filters[e])||(this._filters[e]=[]),null===r?(this._filters[e]=this._filters[e].filter((t=>t!==s)),0===this._filters[e].length&&delete this._filters[e]):"radio"===n?this._filters[e]=[r]:this._filters[e].push(r),this.filter(this._filters)}_setAvailableFilters(){const t=[];return this.DOMElements?this.DOMElements.forEach((e=>{Object.keys(i.getDataAttributes(e)).forEach((e=>{t.push(e)}))})):this._options.items.forEach((e=>{Object.keys(e).forEach((e=>{t.push(e)}))})),[...new Set(t)]}_getConfig(t){const e={...w,...i.getDataAttributes(this._element),...t};return((t,e,r)=>{Object.keys(r).forEach((n=>{const s=r[n],i=e[n],o=i&&((l=i)[0]||l).nodeType?"element":(t=>null==t?`${t}`:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase())(i);var l;if(!new RegExp(s).test(o))throw new Error(`${t.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${s}".`)}))})(I,e,C),e}static getInstance(t){return r.getData(t,L)}static jQueryInterface(t,e,n){return this.each((function(){let s=r.getData(this,L);if(s||(s=new M(this,"object"==typeof t&&t)),"string"==typeof t){if(void 0===s[t])throw new TypeError(`No method named "${t}"`);s[t](e,n)}}))}}var P;return d.find("[data-mdb-filters-init]").forEach((t=>{let e=M.getInstance(t);e||(e=new M(t))})),P=()=>{const e=t();if(e){const t=e.fn[I];e.fn[I]=M.jQueryInterface,e.fn[I].Constructor=M,e.fn[I].noConflict=()=>(e.fn[I]=t,M.jQueryInterface)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",P):P(),M}));
//# sourceMappingURL=filters.min.js.map
