!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).OrganizationChart=t()}(this,(function(){"use strict";const e=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-mdb-no-jquery")?e:null};document.documentElement.dir;const t=e=>document.createElement(e),n=(()=>{const e={};let t=1;return{set(n,o,s){void 0===n[o]&&(n[o]={key:o,id:t},t++),e[n[o].id]=s},get(t,n){if(!t||void 0===t[n])return null;const o=t[n];return o.key===n?e[o.id]:null},delete(t,n){if(void 0===t[n])return;const o=t[n];o.key===n&&(delete e[o.id],delete t[n])}}})(),o={setData(e,t,o){n.set(e,t,o)},getData:(e,t)=>n.get(e,t),removeData(e,t){n.delete(e,t)}};function s(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function i(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const r={setDataAttribute(e,t,n){e.setAttribute(`data-mdb-${i(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-mdb-${i(t)}`)},getDataAttributes(e){if(!e)return{};const t={...e.dataset};return Object.keys(t).filter((e=>e.startsWith("mdb"))).forEach((e=>{let n=e.replace(/^mdb/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=s(t[e])})),t},getDataAttribute:(e,t)=>s(e.getAttribute(`data-mdb-${i(t)}`)),offset(e){const t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},position:e=>({top:e.offsetTop,left:e.offsetLeft}),style(e,t){Object.assign(e.style,t)},toggleClass(e,t){e&&(e.classList.contains(t)?e.classList.remove(t):e.classList.add(t))},addClass(e,t){e.classList.contains(t)||e.classList.add(t)},addStyle(e,t){Object.keys(t).forEach((n=>{e.style[n]=t[n]}))},removeClass(e,t){e.classList.contains(t)&&e.classList.remove(t)},hasClass:(e,t)=>e.classList.contains(t)},a={closest:(e,t)=>e.closest(t),matches:(e,t)=>e.matches(t),find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const n=[];let o=e.parentNode;for(;o&&o.nodeType===Node.ELEMENT_NODE&&3!==o.nodeType;)this.matches(o,t)&&n.push(o),o=o.parentNode;return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(this.matches(n,t))return[n];n=n.nextElementSibling}return[]}},l=e(),c=/[^.]*(?=\..*)\.|.*/,d=/\..*/,u=/::\d+$/,f={};let h=1;const p={mouseenter:"mouseover",mouseleave:"mouseout"},m=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function g(e,t){return t&&`${t}::${h++}`||e.uidEvent||h++}function b(e){const t=g(e);return e.uidEvent=t,f[t]=f[t]||{},f[t]}function y(e,t,n=null){const o=Object.keys(e);for(let s=0,i=o.length;s<i;s++){const i=e[o[s]];if(i.originalHandler===t&&i.delegationSelector===n)return i}return null}function v(e,t,n){const o="string"==typeof t,s=o?n:t;let i=e.replace(d,"");const r=p[i];r&&(i=r);return m.indexOf(i)>-1||(i=e),[o,s,i]}function E(e,t,n,o,s){if("string"!=typeof t||!e)return;n||(n=o,o=null);const[i,r,a]=v(t,n,o),l=b(e),d=l[a]||(l[a]={}),u=y(d,r,i?n:null);if(u)return void(u.oneOff=u.oneOff&&s);const f=g(r,t.replace(c,"")),h=i?function(e,t,n){return function o(s){const i=e.querySelectorAll(t);for(let{target:t}=s;t&&t!==this;t=t.parentNode)for(let r=i.length;r--;"")if(i[r]===t)return s.delegateTarget=t,o.oneOff&&C.off(e,s.type,n),n.apply(t,[s]);return null}}(e,n,o):function(e,t){return function n(o){return o.delegateTarget=e,n.oneOff&&C.off(e,o.type,t),t.apply(e,[o])}}(e,n);h.delegationSelector=i?n:null,h.originalHandler=r,h.oneOff=s,h.uidEvent=f,d[f]=h,e.addEventListener(a,h,i)}function _(e,t,n,o,s){const i=y(t[n],o,s);i&&(e.removeEventListener(n,i,Boolean(s)),delete t[n][i.uidEvent])}const C={on(e,t,n,o){E(e,t,n,o,!1)},one(e,t,n,o){E(e,t,n,o,!0)},off(e,t,n,o){if("string"!=typeof t||!e)return;const[s,i,r]=v(t,n,o),a=r!==t,l=b(e),c="."===t.charAt(0);if(void 0!==i){if(!l||!l[r])return;return void _(e,l,r,i,s?n:null)}c&&Object.keys(l).forEach((n=>{!function(e,t,n,o){const s=t[n]||{};Object.keys(s).forEach((i=>{if(i.indexOf(o)>-1){const o=s[i];_(e,t,n,o.originalHandler,o.delegationSelector)}}))}(e,l,n,t.slice(1))}));const d=l[r]||{};Object.keys(d).forEach((n=>{const o=n.replace(u,"");if(!a||t.indexOf(o)>-1){const t=d[n];_(e,l,r,t.originalHandler,t.delegationSelector)}}))},trigger(e,t,n){if("string"!=typeof t||!e)return null;const o=t.replace(d,""),s=t!==o,i=m.indexOf(o)>-1;let r,a=!0,c=!0,u=!1,f=null;return s&&l&&(r=l.Event(t,n),l(e).trigger(r),a=!r.isPropagationStopped(),c=!r.isImmediatePropagationStopped(),u=r.isDefaultPrevented()),i?(f=document.createEvent("HTMLEvents"),f.initEvent(o,a,!0)):f=new CustomEvent(t,{bubbles:a,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((e=>{Object.defineProperty(f,e,{get:()=>n[e]})})),u&&f.preventDefault(),c&&e.dispatchEvent(f),f.defaultPrevented&&void 0!==r&&r.preventDefault(),f}},O="organization-chart",L=`mdb.${O}`,$=`${O}-table`,S=`${O}-line`,w=`${O}-icon-clicked`,T=`${O}-hide`,D=`.${`${O}-content`}`,j=`.${`${O}-lines-top`}`,k=`.${`${O}-lines`}`,x=`.${`${O}-children`}`,A={data:{},switchHeaderText:!1},H={data:"Object",switchHeaderText:"boolean"};class N{constructor(e,t={}){this._element=e,this._options=t,this._data=this._options.data,this._firstElement=null,this._init(),this._element&&o.setData(e,L,this)}get options(){const e={...A,...r.getDataAttributes(this._element),...this._options};return((e,t,n)=>{Object.keys(n).forEach((o=>{const s=n[o],i=t[o],r=i&&((a=i)[0]||a).nodeType?"element":(e=>null==e?`${e}`:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase())(i);var a;if(!new RegExp(s).test(r))throw new Error(`${e.toUpperCase()}: Option "${o}" provided type "${r}" but expected type "${s}".`)}))})(O,e,H),e}dispose(){o.removeData(this._element,L),this._element=null,this._options=null,this._data=null,this._firstElement=null}_init(){this._buildStructure()}_appendIcon(e,t){const n=document.createElement("a");n.innerHTML='<i class="fas fa-chevron-down"></i>',this._handleHiding(e,n),t.appendChild(n)}_buildStructure(){this._buildNode(this._element,this._data),this._data.children&&this._buildLevels(this._firstElement,this._data.children)}_buildNode(e,n){const o=t("table");o.classList.add($),o.innerHTML='\n  <tbody>\n    <tr class="organization-chart-content"></tr>\n    <tr class="organization-chart-lines-top"></tr>\n    <tr class="organization-chart-lines"></tr>\n    <tr class="organization-chart-children"></tr>\n  </tbody>\n';const s=t("td");if(this._insertContent(s,n,o),n.children){const e=n.children.length;s.setAttribute("colspan",2*e),this._drawTopLine(o,e),e>1&&this._drawLines(o,e)}a.findOne(D,o).appendChild(s);const i=a.findOne(x,o);return e===this._element&&(this._firstElement=i),e.appendChild(o),i}_buildLevels(e,n){n.forEach((n=>{const o=t("td");o.setAttribute("colspan",2),e.appendChild(o);const s=this._buildNode(o,n);n.children&&this._buildLevels(s,n.children)}))}_drawTopLine(e,n){const o=a.findOne(j,e),s=t("td");s.setAttribute("colspan",2*n);const i=t("div");1===n&&(i.style.height="40px"),s.appendChild(i),o.appendChild(s)}_drawLines(e,n){const o=a.findOne(k,e);for(let s=0;s<2*n;s++){const e=t("td");r.addClass(e,S),s%2&&r.addStyle(e,{borderRightColor:"transparent"});(0===s||s===2*n-1)&&r.addStyle(e,{borderTop:"none"}),o.appendChild(e)}}_handleHiding(e,t){C.on(t,"click",(()=>{const n=[...e.querySelector("tbody").children];n.shift(),r.hasClass(n[1],T)?this._animationIn(n):this._animationOut(n);const o=t.querySelector("i");r.toggleClass(o,w)}))}_animationIn(e){e.forEach(((e,t)=>{2===t?(C.one(e,"transitionstart",(()=>{r.removeClass(e,T)})),e.style.transform=null,e.style.visibility=null,e.style.opacity=null):r.removeClass(e,T)}))}_animationOut(e){e.forEach(((e,t)=>{2===t?(e.style.transition="0.2s ease-out",e.style.transform="translateY(-100px)",e.style.opacity=0,C.one(e,"transitionend",(()=>{r.addClass(e,T)}))):r.addClass(e,T)}))}_insertContent(e,t,n){let o=t.label,s=t.name;this._options.switchHeaderText&&(o=t.name,s=t.label);const i=`\n      <div class="card">\n        <div class="card-header">${o}</div>\n        <div class="card-body">\n          <img src="${t.avatar}" alt="" >\n          <p class="card-text">${s}</p>\n        </div>\n      </div>\n    `,a=`\n      <div class="organization-chart-node">   \n        <p>${t.label}</p>\n      </div>\n    `;if(t.name){e.innerHTML=i;const t=e.querySelector(".card");r.addClass(t,"organization-card")}else e.innerHTML=a;const l=e.querySelector("div");t.children&&this._appendIcon(n,l)}static get NAME(){return O}static jQueryInterface(e,t){return this.each((function(){let n=o.getData(this,L);const s="object"==typeof e&&e;if((n||!/dispose/.test(e))&&(n||(n=new N(this,s)),"string"==typeof e)){if(void 0===n[e])throw new TypeError(`No method named "${e}"`);n[e](t)}}))}static getInstance(e){return o.getData(e,L)}}var M;return M=()=>{const t=e();if(t){const e=t.fn[O];t.fn[O]=N.jQueryInterface,t.fn[O].Constructor=N,t.fn[O].noConflict=()=>(t.fn[O]=e,N.jQueryInterface)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",M):M(),N}));
//# sourceMappingURL=organization-chart.min.js.map
