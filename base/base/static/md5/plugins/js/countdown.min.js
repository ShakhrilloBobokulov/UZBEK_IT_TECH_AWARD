!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Countdown=e()}(this,(function(){"use strict";const t=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-mdb-no-jquery")?t:null};document.documentElement.dir;const e=(()=>{const t={};let e=1;return{set(n,o,s){void 0===n[o]&&(n[o]={key:o,id:e},e++),t[n[o].id]=s},get(e,n){if(!e||void 0===e[n])return null;const o=e[n];return o.key===n?t[o.id]:null},delete(e,n){if(void 0===e[n])return;const o=e[n];o.key===n&&(delete t[o.id],delete e[n])}}})(),n={setData(t,n,o){e.set(t,n,o)},getData:(t,n)=>e.get(t,n),removeData(t,n){e.delete(t,n)}};function o(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function s(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const i={setDataAttribute(t,e,n){t.setAttribute(`data-mdb-${s(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-mdb-${s(e)}`)},getDataAttributes(t){if(!t)return{};const e={...t.dataset};return Object.keys(e).filter((t=>t.startsWith("mdb"))).forEach((t=>{let n=t.replace(/^mdb/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=o(e[t])})),e},getDataAttribute:(t,e)=>o(t.getAttribute(`data-mdb-${s(e)}`)),offset(t){const e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},position:t=>({top:t.offsetTop,left:t.offsetLeft}),style(t,e){Object.assign(t.style,e)},toggleClass(t,e){t&&(t.classList.contains(e)?t.classList.remove(e):t.classList.add(e))},addClass(t,e){t.classList.contains(e)||t.classList.add(e)},addStyle(t,e){Object.keys(e).forEach((n=>{t.style[n]=e[n]}))},removeClass(t,e){t.classList.contains(e)&&t.classList.remove(e)},hasClass:(t,e)=>t.classList.contains(e)};let r=Element.prototype.querySelectorAll,a=Element.prototype.querySelector;const l=(()=>{const t=new CustomEvent("Bootstrap",{cancelable:!0}),e=document.createElement("div");return e.addEventListener("Bootstrap",(()=>null)),t.preventDefault(),e.dispatchEvent(t),t.defaultPrevented})(),c=/:scope\b/;(()=>{const t=document.createElement("div");try{t.querySelectorAll(":scope *")}catch(e){return!1}return!0})()||(r=function(t){if(!c.test(t))return this.querySelectorAll(t);const e=Boolean(this.id);e||(this.id=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})("scope"));let n=null;try{t=t.replace(c,`#${this.id}`),n=this.querySelectorAll(t)}finally{e||this.removeAttribute("id")}return n},a=function(t){if(!c.test(t))return this.querySelector(t);const e=u.call(this,t);return void 0!==e[0]?e[0]:null});const u=r,d=a,h=t(),f=/[^.]*(?=\..*)\.|.*/,p=/\..*/,m=/::\d+$/,_={};let g=1;const v={mouseenter:"mouseover",mouseleave:"mouseout"},b=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function w(t,e){return e&&`${e}::${g++}`||t.uidEvent||g++}function y(t){const e=w(t);return t.uidEvent=e,_[e]=_[e]||{},_[e]}function D(t,e,n=null){const o=Object.keys(t);for(let s=0,i=o.length;s<i;s++){const i=t[o[s]];if(i.originalHandler===e&&i.delegationSelector===n)return i}return null}function E(t,e,n){const o="string"==typeof e,s=o?n:e;let i=t.replace(p,"");const r=v[i];r&&(i=r);return b.indexOf(i)>-1||(i=t),[o,s,i]}function S(t,e,n,o,s){if("string"!=typeof e||!t)return;n||(n=o,o=null);const[i,r,a]=E(e,n,o),l=y(t),c=l[a]||(l[a]={}),u=D(c,r,i?n:null);if(u)return void(u.oneOff=u.oneOff&&s);const d=w(r,e.replace(f,"")),h=i?function(t,e,n){return function o(s){const i=t.querySelectorAll(e);for(let{target:e}=s;e&&e!==this;e=e.parentNode)for(let r=i.length;r--;"")if(i[r]===e)return o.oneOff&&$.off(t,s.type,n),n.apply(e,[s]);return null}}(t,n,o):function(t,e){return function n(o){return n.oneOff&&$.off(t,o.type,e),e.apply(t,[o])}}(t,n);h.delegationSelector=i?n:null,h.originalHandler=r,h.oneOff=s,h.uidEvent=d,c[d]=h,t.addEventListener(a,h,i)}function C(t,e,n,o,s){const i=D(e[n],o,s);i&&(t.removeEventListener(n,i,Boolean(s)),delete e[n][i.uidEvent])}const $={on(t,e,n,o){S(t,e,n,o,!1)},one(t,e,n,o){S(t,e,n,o,!0)},off(t,e,n,o){if("string"!=typeof e||!t)return;const[s,i,r]=E(e,n,o),a=r!==e,l=y(t),c="."===e.charAt(0);if(void 0!==i){if(!l||!l[r])return;return void C(t,l,r,i,s?n:null)}c&&Object.keys(l).forEach((n=>{!function(t,e,n,o){const s=e[n]||{};Object.keys(s).forEach((i=>{if(i.indexOf(o)>-1){const o=s[i];C(t,e,n,o.originalHandler,o.delegationSelector)}}))}(t,l,n,e.slice(1))}));const u=l[r]||{};Object.keys(u).forEach((n=>{const o=n.replace(m,"");if(!a||e.indexOf(o)>-1){const e=u[n];C(t,l,r,e.originalHandler,e.delegationSelector)}}))},trigger(t,e,n){if("string"!=typeof e||!t)return null;const o=e.replace(p,""),s=e!==o,i=b.indexOf(o)>-1;let r,a=!0,c=!0,u=!1,d=null;return s&&h&&(r=h.Event(e,n),h(t).trigger(r),a=!r.isPropagationStopped(),c=!r.isImmediatePropagationStopped(),u=r.isDefaultPrevented()),i?(d=document.createEvent("HTMLEvents"),d.initEvent(o,a,!0)):d=new CustomEvent(e,{bubbles:a,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((t=>{Object.defineProperty(d,t,{get:()=>n[t]})})),u&&(d.preventDefault(),l||Object.defineProperty(d,"defaultPrevented",{get:()=>!0})),c&&t.dispatchEvent(d),d.defaultPrevented&&void 0!==r&&r.preventDefault(),d}},T={closest:(t,e)=>t.closest(e),matches:(t,e)=>t.matches(e),find:(t,e=document.documentElement)=>[].concat(...u.call(e,t)),findOne:(t,e=document.documentElement)=>d.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let o=t.parentNode;for(;o&&o.nodeType===Node.ELEMENT_NODE&&3!==o.nodeType;)this.matches(o,e)&&n.push(o),o=o.parentNode;return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(this.matches(n,e))return[n];n=n.nextElementSibling}return[]}},O="countdown",L=`mdb.${O}`,I=`${O}-unit-separator`,A=`start.${L}`,x=`end.${L}`,j=`.${O}-unit`,k={countdown:"",countdownSeparator:"",countdownPosition:"horizontal",countdownLabelPosition:"vertical",countdownTextStyle:"",countdownLabelStyle:"",countdownTextSize:"",countdownInterval:0},M={countdown:"string",countdownSeparator:"",countdownPosition:"string",countdownLabelPosition:"string",countdownTextStyle:"string",countdownLabelStyle:"string",countdownTextSize:"string",countdownInterval:"number"};class P{constructor(t,e={}){this._element=t,this._options=this._getConfig(e),this._countdownDate=null,this._countingInterval=null,this._dateDistance=null,this._previousDistance=0,this._isCounting=!1,this._element&&(n.setData(t,L,this),this._init())}dispose(){n.removeData(this._element,L),this._stopCounting(),this._dateDistance=null,this._element.querySelectorAll("span").forEach((t=>{t.innerHTML=""})),this._element=null}stop(){clearInterval(this._countingInterval),this._countingInterval=null,this._isCounting=!1,this._previousDistance=0,$.trigger(this._element,x)}start(){$.trigger(this._element,A),this._dateDistance=this._checkDateDistance(),this._isCounting=!0,this._startInterval()}setCountdownDate(t){this._isValidDate(this._options.countdown)?(this._isCounting=!1,this._previousDistance=0,this._countdownDate=new Date(t).getTime(),this._isCounting||this.start()):this._element.innerHTML=`\n        <p class="note note-danger">\n          <strong>Invalid Date Format: ${this._options.countdown}</strong>. Please provide\n          <a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#ECMAScript_5_ISO-8601_format_support' target="_blank">valid date format</a>\n        </p>\n      `}_getConfig(t){const e=i.getDataAttributes(this._element),n={...k,...e,...t};return((t,e,n)=>{Object.keys(n).forEach((o=>{const s=n[o],i=e[o],r=i&&((a=i)[0]||a).nodeType?"element":(t=>null==t?`${t}`:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase())(i);var a;if(!new RegExp(s).test(r))throw new Error(`${t.toUpperCase()}: Option "${o}" provided type "${r}" but expected type "${s}".`)}))})(O,n,M),n}_setStyles(){const t=T.find(j,this._element);if(t.forEach((t=>{i.addClass(t,`countdown-unit-${this._options.countdownLabelPosition}`)})),i.addClass(this._element,"countdown"),i.addClass(this._element,`countdown-${this._options.countdownPosition}`),""!==this._options.countdownSeparator&&!this._options.countdownPosition.includes("vertical"))for(let e=0;e<t.length-1;e++)t[e].insertAdjacentHTML("afterend",`<span class=${I}>${this._options.countdownSeparator}</span>`)}_handleInterval(){const t=this._options.countdown,e=1e3*this._options.countdownInterval;$.on(this._element,x,(()=>{const n=new Date(Date.now()).getTime(),o=new Date(t).getTime()+e;let s=0;if(n>o){const t=n-o;let i;if(t>e){i=e-t%e}else i=e-t;s=n+i}else s=o;this.setCountdownDate(s)}))}_init(){this._setCountDownDate(this._options.countdown),this._startCounting(),this._options.countdownInterval>0&&this._handleInterval()}_setCountDownDate(t){this._isValidDate(this._options.countdown)?this._countdownDate=new Date(t).getTime():this._element.innerHTML=`\n      <p class="note note-danger">\n      <strong>Invalid Date Format: ${this._options.countdown}</strong>. Please provide\n      <a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#ECMAScript_5_ISO-8601_format_support' target="_blank">valid date format</a>\n      </p>\n      `}_startCounting(){$.trigger(this._element,A),this._isCounting=!0,this._createCounter(),this._setStyles(),this._startInterval()}_startInterval(){this._updateCounter(this._dateDistance),this._countingInterval=setInterval((()=>{this._dateDistance=this._checkDateDistance(),this._isCounting&&this._dateDistance?this._updateCounter(this._dateDistance):this._stopCounting()}),1e3)}_isValidDate(t){return(t=new Date(t))instanceof Date&&!isNaN(t)}_checkDateDistance(){const t=(new Date).getTime();let e=this._countdownDate-t;return!(e<0)&&(0!==this._previousDistance&&this._previousDistance-e>1e3&&(e=this._previousDistance-1e3),this._previousDistance=e,e)}_createCounter(){const t=this._checkDateDistance(),e=this._calculateTime(t);Object.entries(e).forEach((([t,e])=>{const n=T.findOne(`.countdown-${t}`,this._element);if(n){const o=this._generateUnitTemplate(n,t,e);n.innerHTML=o,i.setDataAttribute(n,t,e),i.removeDataAttribute(n,"countdownLabel")}}))}_updateCounter(t){const e=this._calculateTime(t);Object.entries(e).forEach((([t,e])=>{const n=T.findOne(`.countdown-${t}`,this._element);if(n){const o=T.findOne("[data-mdb-countdown-value]",n);if(o.textContent===e)return;o.textContent=e,i.setDataAttribute(n,t,e)}}))}_calculateTime(t){return{days:this._formatTime(Math.floor(t/864e5)),hours:this._formatTime(Math.floor(t%864e5/36e5)),minutes:this._formatTime(Math.floor(t%36e5/6e4)),seconds:this._formatTime(Math.floor(t%6e4/1e3))}}_formatTime(t){return t>9?`${t}`:`0${t}`}_generateUnitTemplate(t,e,n){const o=i.getDataAttribute(t,"countdownLabel"),s=`label-${e}`,r=`aria-labelledby="${s}"`,a=""!==this._options.countdownTextStyle?`class="${this._options.countdownTextStyle}"`:"";let l="",c="";if(""!==this._options.countdownTextSize){const t=this._options.countdownTextSize.match(/\d+/)[0];l=`style="font-size: ${t/4}${this._options.countdownTextSize.split(t)[1]}"`,c=`style="font-size: ${this._options.countdownTextSize}"`}return`\n      <span ${o?r:""} data-mdb-countdown-value ${a} ${c}>${n}</span>\n      ${o?`<span name="${s}" data-mdb-countdown-label class="${this._options.countdownLabelStyle}" ${l}>${o}</span>`:""}\n    `}_stopCounting(){clearInterval(this._countingInterval),this._countingInterval=null,this._isCounting=!1,this._previousDistance=0,$.trigger(this._element,x)}static get NAME(){return O}static jQueryInterface(t,e){return this.each((function(){let o=n.getData(this,L);const s="object"==typeof t&&t;if((o||!/dispose/.test(t))&&(o||(o=new P(this,s)),"string"==typeof t)){if(void 0===o[t])throw new TypeError(`No method named "${t}"`);o[t](e)}}))}static getInstance(t){return n.getData(t,L)}}var z;return T.find("[data-mdb-countdown-init]").forEach((t=>{let e=P.getInstance(t);return e||(e=new P(t)),e})),z=()=>{const e=t();if(e){const t=e.fn[O];e.fn[O]=P.jQueryInterface,e.fn[O].Constructor=P,e.fn[O].noConflict=()=>(e.fn[O]=t,P.jQueryInterface)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",z):z(),P}));
//# sourceMappingURL=countdown.min.js.map
