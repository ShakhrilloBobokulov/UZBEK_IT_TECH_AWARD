!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).FileUpload=t()}(this,(function(){"use strict";const e=e=>{do{e+=Math.floor(1e6*Math.random())}while(document.getElementById(e));return e},t=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-mdb-no-jquery")?e:null};document.documentElement.dir;const i=e=>document.createElement(e),n=(()=>{const e={};let t=1;return{set(i,n,o){void 0===i[n]&&(i[n]={key:n,id:t},t++),e[i[n].id]=o},get(t,i){if(!t||void 0===t[i])return null;const n=t[i];return n.key===i?e[n.id]:null},delete(t,i){if(void 0===t[i])return;const n=t[i];n.key===i&&(delete e[n.id],delete t[i])}}})(),o={setData(e,t,i){n.set(e,t,i)},getData:(e,t)=>n.get(e,t),removeData(e,t){n.delete(e,t)}};let s=Element.prototype.querySelectorAll,a=Element.prototype.querySelector;const l=(()=>{const e=new CustomEvent("Bootstrap",{cancelable:!0}),t=document.createElement("div");return t.addEventListener("Bootstrap",(()=>null)),e.preventDefault(),t.dispatchEvent(e),e.defaultPrevented})(),r=/:scope\b/;(()=>{const e=document.createElement("div");try{e.querySelectorAll(":scope *")}catch(t){return!1}return!0})()||(s=function(t){if(!r.test(t))return this.querySelectorAll(t);const i=Boolean(this.id);i||(this.id=e("scope"));let n=null;try{t=t.replace(r,`#${this.id}`),n=this.querySelectorAll(t)}finally{i||this.removeAttribute("id")}return n},a=function(e){if(!r.test(e))return this.querySelector(e);const t=p.call(this,e);return void 0!==t[0]?t[0]:null});const p=s,d=a,c=t(),m=/[^.]*(?=\..*)\.|.*/,f=/\..*/,u=/::\d+$/,h={};let _=1;const v={mouseenter:"mouseover",mouseleave:"mouseout"},g=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function x(e,t){return t&&`${t}::${_++}`||e.uidEvent||_++}function y(e){const t=x(e);return e.uidEvent=t,h[t]=h[t]||{},h[t]}function b(e,t,i=null){const n=Object.keys(e);for(let o=0,s=n.length;o<s;o++){const s=e[n[o]];if(s.originalHandler===t&&s.delegationSelector===i)return s}return null}function E(e,t,i){const n="string"==typeof t,o=n?i:t;let s=e.replace(f,"");const a=v[s];a&&(s=a);return g.indexOf(s)>-1||(s=e),[n,o,s]}function C(e,t,i,n,o){if("string"!=typeof t||!e)return;i||(i=n,n=null);const[s,a,l]=E(t,i,n),r=y(e),p=r[l]||(r[l]={}),d=b(p,a,s?i:null);if(d)return void(d.oneOff=d.oneOff&&o);const c=x(a,t.replace(m,"")),f=s?function(e,t,i){return function n(o){const s=e.querySelectorAll(t);for(let{target:t}=o;t&&t!==this;t=t.parentNode)for(let a=s.length;a--;"")if(s[a]===t)return n.oneOff&&N.off(e,o.type,i),i.apply(t,[o]);return null}}(e,i,n):function(e,t){return function i(n){return i.oneOff&&N.off(e,n.type,t),t.apply(e,[n])}}(e,i);f.delegationSelector=s?i:null,f.originalHandler=a,f.oneOff=o,f.uidEvent=c,p[c]=f,e.addEventListener(l,f,s)}function w(e,t,i,n,o){const s=b(t[i],n,o);s&&(e.removeEventListener(i,s,Boolean(o)),delete t[i][s.uidEvent])}const N={on(e,t,i,n){C(e,t,i,n,!1)},one(e,t,i,n){C(e,t,i,n,!0)},off(e,t,i,n){if("string"!=typeof t||!e)return;const[o,s,a]=E(t,i,n),l=a!==t,r=y(e),p="."===t.charAt(0);if(void 0!==s){if(!r||!r[a])return;return void w(e,r,a,s,o?i:null)}p&&Object.keys(r).forEach((i=>{!function(e,t,i,n){const o=t[i]||{};Object.keys(o).forEach((s=>{if(s.indexOf(n)>-1){const n=o[s];w(e,t,i,n.originalHandler,n.delegationSelector)}}))}(e,r,i,t.slice(1))}));const d=r[a]||{};Object.keys(d).forEach((i=>{const n=i.replace(u,"");if(!l||t.indexOf(n)>-1){const t=d[i];w(e,r,a,t.originalHandler,t.delegationSelector)}}))},trigger(e,t,i){if("string"!=typeof t||!e)return null;const n=t.replace(f,""),o=t!==n,s=g.indexOf(n)>-1;let a,r=!0,p=!0,d=!1,m=null;return o&&c&&(a=c.Event(t,i),c(e).trigger(a),r=!a.isPropagationStopped(),p=!a.isImmediatePropagationStopped(),d=a.isDefaultPrevented()),s?(m=document.createEvent("HTMLEvents"),m.initEvent(n,r,!0)):m=new CustomEvent(t,{bubbles:r,cancelable:!0}),void 0!==i&&Object.keys(i).forEach((e=>{Object.defineProperty(m,e,{get:()=>i[e]})})),d&&(m.preventDefault(),l||Object.defineProperty(m,"defaultPrevented",{get:()=>!0})),p&&e.dispatchEvent(m),m.defaultPrevented&&void 0!==a&&a.preventDefault(),m}},F={closest:(e,t)=>e.closest(t),matches:(e,t)=>e.matches(t),find:(e,t=document.documentElement)=>[].concat(...p.call(t,e)),findOne:(e,t=document.documentElement)=>d.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const i=[];let n=e.parentNode;for(;n&&n.nodeType===Node.ELEMENT_NODE&&3!==n.nodeType;)this.matches(n,t)&&i.push(n),n=n.parentNode;return i},prev(e,t){let i=e.previousElementSibling;for(;i;){if(i.matches(t))return[i];i=i.previousElementSibling}return[]},next(e,t){let i=e.nextElementSibling;for(;i;){if(this.matches(i,t))return[i];i=i.nextElementSibling}return[]}};function O(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function S(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const j={setDataAttribute(e,t,i){e.setAttribute(`data-mdb-${S(t)}`,i)},removeDataAttribute(e,t){e.removeAttribute(`data-mdb-${S(t)}`)},getDataAttributes(e){if(!e)return{};const t={...e.dataset};return Object.keys(t).filter((e=>e.startsWith("mdb"))).forEach((e=>{let i=e.replace(/^mdb/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=O(t[e])})),t},getDataAttribute:(e,t)=>O(e.getAttribute(`data-mdb-${S(t)}`)),offset(e){const t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},position:e=>({top:e.offsetTop,left:e.offsetLeft}),style(e,t){Object.assign(e.style,t)},toggleClass(e,t){e&&(e.classList.contains(t)?e.classList.remove(t):e.classList.add(t))},addClass(e,t){e.classList.contains(t)||e.classList.add(t)},addStyle(e,t){Object.keys(t).forEach((i=>{e.style[i]=t[i]}))},removeClass(e,t){e.classList.contains(t)&&e.classList.remove(t)},hasClass:(e,t)=>e.classList.contains(t)},A=[{mime_type:"audio/aac",ext:".aac"},{mime_type:"application/x-abiword",ext:".abw"},{mime_type:"application/x-freearc",ext:".arc"},{mime_type:"image/avif",ext:".avif"},{mime_type:"video/x-msvideo",ext:".avi"},{mime_type:"application/vnd.amazon.ebook",ext:".azw"},{mime_type:"application/octet-stream",ext:".bin"},{mime_type:"image/bmp",ext:".bmp"},{mime_type:"application/x-bzip",ext:".bz"},{mime_type:"application/x-bzip2",ext:".bz2"},{mime_type:"application/x-cdf",ext:".cda"},{mime_type:"application/x-csh",ext:".csh"},{mime_type:"text/css",ext:".css"},{mime_type:"text/csv",ext:".csv"},{mime_type:"application/msword",ext:".doc"},{mime_type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",ext:".docx"},{mime_type:"application/vnd.ms-fontobject",ext:".eot"},{mime_type:"application/epub+zip",ext:".epub"},{mime_type:"application/gzip",ext:".gz"},{mime_type:"image/gif",ext:".gif"},{mime_type:"text/html",ext:".htm"},{mime_type:"text/html",ext:".html"},{mime_type:"image/vnd.microsoft.icon",ext:".ico"},{mime_type:"text/calendar",ext:".ics"},{mime_type:"application/x-java-archive",ext:".jar"},{mime_type:"image/jpeg",ext:".jpeg"},{mime_type:"image/jpeg",ext:".jpg"},{mime_type:"text/javascript",ext:".js"},{mime_type:"application/json",ext:".json"},{mime_type:"application/ld+json",ext:".jsonld"},{mime_type:"audio/midi",ext:".mid"},{mime_type:"audio/midi",ext:".midi"},{mime_type:"text/javascript",ext:".mjs"},{mime_type:"audio/mpeg",ext:".mp3"},{mime_type:"video/mp4",ext:".mp4"},{mime_type:"video/mpeg",ext:".mpeg"},{mime_type:"application/vnd.apple.installer+xml",ext:".mpkg"},{mime_type:"application/vnd.oasis.opendocument.presentation",ext:".odp"},{mime_type:"application/vnd.oasis.opendocument.spreadsheet",ext:".ods"},{mime_type:"application/vnd.oasis.opendocument.text",ext:".odt"},{mime_type:"audio/ogg",ext:".oga"},{mime_type:"video/ogg",ext:".ogv"},{mime_type:"application/ogg",ext:".ogx"},{mime_type:"audio/opus",ext:".opus"},{mime_type:"application/vnd.oasis.opendocument.formula-template",ext:".otf"},{mime_type:"image/png",ext:".png"},{mime_type:"application/pdf",ext:".pdf"},{mime_type:"application/x-php",ext:".php"},{mime_type:"application/vnd.ms-powerpoint",ext:".ppt"},{mime_type:"application/vnd.openxmlformats-officedocument.presentationml.presentation",ext:".pptx"},{mime_type:"application/vnd.rar",ext:".rar"},{mime_type:"application/rtf",ext:".rtf"},{mime_type:"application/x-shellscript",ext:".sh"},{mime_type:"image/svg+xml",ext:".svg"},{mime_type:"application/vnd.adobe.flash.movie",ext:".swf"},{mime_type:"application/x-tar",ext:".tar"},{mime_type:"image/tiff",ext:".tif"},{mime_type:"image/tiff",ext:".tiff"},{mime_type:"video/mp2t",ext:".ts"},{mime_type:"font/ttf",ext:".ttf"},{mime_type:"text/plain",ext:".txt"},{mime_type:"application/vnd.visio",ext:".vsd"},{mime_type:"audio/wav",ext:".wav"},{mime_type:"audio/webm",ext:".weba"},{mime_type:"video/webm",ext:".webm"},{mime_type:"image/webp",ext:".webp"},{mime_type:"font/woff",ext:".woff"},{mime_type:"font/woff2",ext:".woff2"},{mime_type:"application/xhtml+xml",ext:".xhtml"},{mime_type:"application/vnd.ms-excel",ext:".xls"},{mime_type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ext:".xlsx"},{mime_type:"application/xml",ext:".xml"},{mime_type:"application/vnd.mozilla.xul+xml",ext:".xul"},{mime_type:"application/x-zip-compressed",ext:".zip"},{mime_type:"video/3gpp",ext:".3pg"},{mime_type:"video/3gpp2",ext:".3g2"},{mime_type:"application/x-7z-compressed",ext:".7z"}],D="fileUpload",z=`mdb.${D}`,k=`.${z}`,M={maxFileSize:"(Infinity|number)",defaultFile:"(null|string)",height:"(null|number)",disabled:"(string|boolean)",acceptedExtensions:"array",multiple:"boolean",defaultMsg:"string",mainError:"string",maxSizeError:"string",formatError:"string",previewMsg:"string",removeBtn:"string",disabledRemoveBtn:"boolean",maxFileQuantity:"(Infinity|number)"},L={maxFileSize:1/0,defaultFile:null,height:null,disabled:!1,acceptedExtensions:[],multiple:!1,defaultMsg:"Drag and drop a file here or click",mainError:"Ooops, something wrong happended.",maxSizeError:"Your file is too big (Max size ~~~)",formatError:"Your file has incorrect file format (correct format(s) ~~~)",quantityError:"Too many files (allowed quantity of files  ~~~)",previewMsg:"Drag and drop or click to replace",removeBtn:"Remove",disabledRemoveBtn:!1,maxFileQuantity:1/0},U={G:1e9,M:1e6,K:1e3,B:1},$=`fileError${k}`,B=`fileRemove${k}`,P=`fileAdd${k}`;class T{constructor(e,t={}){this._element=e,this.options=this._getConfig(t),this._fileUploadWrapper=e.parentNode,this._files=[],this._errors=[],this._element&&o.setData(e,z,this),this.init()}static get NAME(){return D}init(){const{initMDB:e,Ripple:t}=mdb;e({Ripple:t}),this._createNativeAttr(),this._createDropZone(),N.on(this._element,"change",(e=>{this.options.multiple?this._createMultipleList(e):this._files=Array.from(e.target.files),this._onChangeEvent()}))}dispose(){N.off(this._element,"change"),N.off(this._element,"click");const e=F.findOne(".file-upload-previews",this._fileUploadWrapper);N.off(e,"drop"),N.off(e,"dragover"),o.removeData(this._element,z),this._element=null}update(e={}){this.options=this._getConfig(e),this._createNativeAttr(),this._createDropZone()}reset(){this._files=[],this._errors=[],this._createDropZone()}_getConfig(e){const t={...L,...j.getDataAttributes(this._element),...e};return t.maxFileSize&&t.maxFileSize!==1/0&&(t.maxFileSize=this._convertFileSizeToBytes(t.maxFileSize)),"string"==typeof t.acceptedExtensions&&(t.acceptedExtensions=t.acceptedExtensions.split(",")),((e,t,i)=>{Object.keys(i).forEach((n=>{const o=i[n],s=t[n],a=s&&((l=s)[0]||l).nodeType?"element":(e=>null==e?`${e}`:{}.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase())(s);var l;if(!new RegExp(o).test(a))throw new Error(`${e.toUpperCase()}: Option "${n}" provided type "${a}" but expected type "${o}".`)}))})(D,t,M),t}_convertFileSizeToBytes(e){return parseFloat(e)*U[e[e.length-1]]}_createNativeAttr(){const{disabled:e,acceptedExtensions:t,multiple:i}=this.options;e&&this._element.setAttribute("disabled",e),t&&this._element.setAttribute("accept",t),i&&this._element.setAttribute("multiple",i)}_createDropZone(){this._createBasicContainer(),this.options.defaultFile&&this._createDefaultFilePreview()}_createBasicContainer(){const e=F.findOne(".file-upload",this._fileUploadWrapper);e&&this._fileUploadWrapper.removeChild(e);const t=i("div");t.className="file-upload",this.options.height&&j.style(t,{height:`${this.options.height}px`}),this.options.disabled&&j.addClass(t,"disabled");const n=this._createFileUploadMsg(),o=this._createFileUploadErrors(),s=this._createFileUploadMask(),a=this._createPreviews();this.options.multiple&&j.addClass(this._element,"has-multiple"),t.appendChild(n),t.appendChild(s),t.appendChild(o),t.appendChild(this._element),t.appendChild(a),this._fileUploadWrapper.appendChild(t)}_createFileUploadMsg(){const e=i("div");e.className="file-upload-message";const t=i("i");t.className="fas fa-cloud-upload-alt file-upload-cloud-icon";const n=i("p");n.className="file-upload-default-message",n.textContent=this.options.defaultMsg;const o=i("p");return o.className="file-upload-main-error",e.appendChild(t),e.appendChild(n),e.appendChild(o),e}_createFileUploadErrors(){const e=i("ul");return e.className="file-upload-errors",e}_createFileUploadMask(){const e=i("div");return e.className="file-upload-mask",e}_createPreviews(){const t=i("div");return t.className="file-upload-previews",this.options.multiple&&(N.on(t,"drop",(t=>{if(t.preventDefault(),this.options.maxFileQuantity>this._files.length){const i=t.dataTransfer?Array.from(t.dataTransfer.files):[];i.forEach((t=>{t.id=e("file-")})),this._files=[...this._files,...i],this._onChangeEvent()}})),N.on(t,"dragover",(e=>{e.preventDefault()}))),t}_createDefaultFilePreview(){const e=F.findOne(".file-upload-previews",this._fileUploadWrapper),t=F.findOne(".file-upload",this._fileUploadWrapper);j.addClass(t,"has-preview");const n=i("div");n.className="file-upload-preview";const o=i("span");o.className="file-upload-render";const s=i("div");let a;s.className="file-upload-preview-details",this.options.disabledRemoveBtn||(a=this._createClearButton(n));const l=i("div");l.className="file-uplod-preview-details-inner";const r=i("p");r.className="file-upload-file-name";const p=this.options.defaultFile.split("/"),d=p[p.length-1],c=d.split(".")[d.split(".").length-1];if("jpg"===c||"jpeg"===c||"png"===c||"svg"===c||"webp"===c||"bmp"===c||"gif"===c){const e=i("img");e.className="file-upload-preview-img",e.src=this.options.defaultFile,o.appendChild(e)}else{const e=i("i");e.className="fas fa-file file-upload-file-icon";const t=i("span");t.className="file-upload-extension",o.appendChild(e),o.appendChild(t)}r.textContent=d;const m=i("p");m.className="file-upload-preview-message",m.textContent=this.options.previewMsg,l.appendChild(r),l.appendChild(m),a&&s.appendChild(a),s.appendChild(l),n.appendChild(o),n.appendChild(s),e.appendChild(n)}_createPreview(){const e=F.findOne(".file-upload",this._fileUploadWrapper),t=F.findOne(".file-upload-previews",this._fileUploadWrapper),n=F.find(".file-upload-preview",t),o=F.findOne("ul.file-upload-errors",e);if(F.findOne(".file-upload-main-error",e).textContent="",this.options.isMultiple||n.forEach((e=>{t.removeChild(e)})),this._errors.length)return j.addClass(e,"has-error"),o.innerHTML="",F.findOne(".file-upload-main-error",e).textContent=this.options.mainError,void this._errors.forEach((e=>{o.innerHTML+=`<li class="file-upload-error">${e}</li>`}));e.classList.remove("has-error"),o.innerHTML="",this._files.forEach((n=>{j.addClass(e,"has-preview");const o=i("div");o.className="file-upload-preview";const s=this._createFileUploadRender(n),a=this._createFileUploadPreviewDetails(n,o);o.appendChild(s),o.appendChild(a),t.appendChild(o)}))}_createFileUploadRender(e){const t=e.type.split("/"),n=i("div");if(n.className="file-upload-render","image"===t[0]){const t=new FileReader;t.onloadend=()=>{const e=i("img");e.src=t.result,e.className="file-upload-preview-img",n.appendChild(e)},e&&t.readAsDataURL(e)}else{const e=i("i");e.className="fas fa-file file-upload-file-icon";const o=i("span");o.className="file-upload-extension",o.textContent=t[1],n.appendChild(e),n.appendChild(o)}return n}_createFileUploadPreviewDetails(e,t){const n=i("div");n.className="file-upload-preview-details";const o=i("div");o.className="file-upload-details-container",this.options.multiple&&N.on(o,"click",(()=>{this.options.maxFileQuantity>this._files.length&&this._element.click()}));const s=i("div");s.className="file-uplod-preview-details-inner";const a=i("p");a.className="file-upload-file-name",a.textContent=e.name;const l=i("p");return l.className="file-upload-preview-message",l.textContent=this.options.previewMsg,s.appendChild(a),s.appendChild(l),o.appendChild(s),this.options.disabledRemoveBtn||n.appendChild(this._createClearButton(t,e)),n.appendChild(o),n}_createClearButton(e,t){const{removeBtn:n}=this.options,o=i("button");o.className="btn btn-danger file-upload-remove-file-btn",o.textContent=n,j.setDataAttribute(o,"rippleInit","");const s=i("i");return s.className="far fa-trash-alt ms-1",o.appendChild(s),N.on(o,"click",(()=>{const i=e.parentNode;this._removeFileAndPreview(e,i,t)})),o}_removeFileAndPreview(e,t,i){const n=F.findOne(".file-upload",this._fileUploadWrapper);t.removeChild(e),this.options.multiple?this._files=this._files.filter((e=>e.id!==i.id)):this._files=[],this._element.value="",this._errors=[],n.classList.remove("has-error"),N.trigger(this._element,B,{files:this._files,removedFile:i})}_createMultipleList(e){this.options.maxFileQuantity>=e.target.files.length&&(this._files=[...this._files,...Array.from(e.target.files)])}_createFilesId(){this._files.forEach((t=>{t.id=e("file-")}))}_onChangeEvent(){this._validateParameters(),this._errors.length?(this._files=[],this._element.value="",N.trigger(this._element,$,{errors:this._errors})):(this._createFilesId(),N.trigger(this._element,P,{files:this._files})),this._createPreview(),this._errors=[]}_validateParameters(){this._files.forEach((e=>{this._checkFileSize(e),this._checkAcceptedExtensions(e)}))}_checkFileSize(e){const{maxFileSize:t,maxSizeError:i}=this.options;if(t<e.size){const n=U.M;this._errors.push(i.replace("~~~",t/n+"M")),this.options.multiple&&(this._files=this._files.filter((t=>t.id!==e.id)))}}_checkAcceptedExtensions(e){const t=[];A.forEach((e=>{t.push(e.ext)}));const{acceptedExtensions:i,formatError:n}=this.options;if(i.length){let o=e.type.split("/")[0],s=e.type.split("/")[1];if(""===o){const t=e.name.split(".");o=`.${t[t.length-1]}`,s=t[t.length-1]}let a=!1;i.forEach((e=>{e=e.trim();const i=t.indexOf(`${e}`)>-1;o===e?a=!0:i&&(e=A.find((t=>t.ext===e)).mime_type),(e.includes("/*")&&e.includes(o)||e.includes("/")&&e.includes(o)&&e.includes(s)||e.includes(s))&&(a=!0)})),a||(this._errors.push(n.replace("~~~",i)),this.options.multiple&&(this._files=this._files.filter((t=>t.id!==e.id))))}}static getInstance(e){return o.getData(e,z)}static jQueryInterface(e,t){return this.each((function(){let i=o.getData(this,z);const n="object"==typeof e&&e;if((i||!/dispose/.test(e))&&(i||(i=new T(this,n)),"string"==typeof e)){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}}))}}var R;return F.find("[data-mdb-file-upload-init]").forEach((e=>{let t=T.getInstance(e);return t||(t=new T(e)),t})),R=()=>{const e=t();if(e){const t=e.fn[D];e.fn[D]=T.jQueryInterface,e.fn[D].Constructor=T,e.fn[D].noConflict=()=>(e.fn[D]=t,T.jQueryInterface)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",R):R(),T}));
//# sourceMappingURL=file-upload.min.js.map
