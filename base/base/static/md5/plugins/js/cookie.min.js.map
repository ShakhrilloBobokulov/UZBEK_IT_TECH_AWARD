{"version":3,"file":"cookie.min.js","sources":["../../../src/plugins/cookie/js/cookie.js"],"sourcesContent":["const NAME = 'cookie';\n\nclass Cookie {\n  // Getters\n  static get NAME() {\n    return NAME;\n  }\n\n  // Public\n\n  // Private\n\n  // Static\n  static set(name, value, attributes = {}) {\n    attributes = Object.assign(attributes, { path: '/' });\n\n    // convert number to date\n    if (typeof attributes.expires === 'number') {\n      // expires in days\n      attributes.expires = new Date(Number(new Date()) + attributes.expires * 1000 * 60 * 60 * 24);\n    }\n\n    if (attributes.expires) {\n      // convert date to string\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    // if value is an object or an array transform to string\n    const stringifiedValue = JSON.stringify(value);\n    if (/^[{[]/.test(stringifiedValue)) {\n      value = stringifiedValue;\n    }\n\n    // decode value characters\n    value = encodeURIComponent(String(value));\n\n    // decode name characters\n    name = encodeURIComponent(String(name)).replace(/[()]/g, escape);\n\n    // convert attributes array to string\n    let stringifiedAttributes = '';\n    Object.keys(attributes).forEach((name) => {\n      stringifiedAttributes += `; ${name}`;\n      stringifiedAttributes += `=${attributes[name].split(';')[0]}`;\n    });\n\n    return (document.cookie = `${name}=${value}${stringifiedAttributes}`);\n  }\n\n  static get(name) {\n    const cookies = document.cookie ? document.cookie.split('; ') : [];\n    const result = {};\n\n    cookies.forEach((el) => {\n      const cookie = el.split('=');\n      let cookieValue = cookie.slice(1).join('=');\n\n      // decode cookies name and value\n      const cookieName = cookie[0].replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\n      // decode cookie value\n      cookieValue = cookieValue.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\n      result[cookieName] = cookieValue;\n    });\n\n    return name ? result[name] : result;\n  }\n\n  static remove(name) {\n    this.set(name, '', { expires: -1 });\n  }\n\n  static showModalNewUser(id) {\n    const isFirstVisitOnPage = !this.get('is-first-visit');\n\n    if (isFirstVisitOnPage) {\n      const modalElement = document.getElementById(id);\n      if (modalElement) {\n        const modal = new mdb.Modal(modalElement);\n        modal.show();\n\n        modalElement.addEventListener('hidden.bs.modal', () => {\n          this.set('is-first-visit', false, { expires: 365 });\n        });\n      }\n    }\n  }\n\n  static showModalScoring(id, value) {\n    const counter = Number(this.get('visit-counter')) || 0;\n    const newCounter = counter + 1;\n\n    this.set('visit-counter', newCounter, { expires: 365 });\n\n    if (newCounter === value) {\n      const modalElement = document.getElementById(id);\n\n      if (modalElement) {\n        const modal = new mdb.Modal(modalElement);\n        modal.show();\n      }\n    }\n  }\n}\n\nexport default Cookie;\n"],"names":["NAME","set","name","value","attributes","Object","assign","path","expires","Date","Number","toUTCString","stringifiedValue","JSON","stringify","test","encodeURIComponent","String","replace","escape","stringifiedAttributes","keys","forEach","split","document","cookie","get","cookies","result","el","cookieValue","slice","join","cookieName","decodeURIComponent","remove","this","showModalNewUser","id","modalElement","getElementById","mdb","Modal","show","addEventListener","showModalScoring","newCounter"],"mappings":"8OAEA,MAEE,eAAWA,GACF,MALE,QAMV,CAOD,UAAOC,CAAIC,EAAMC,EAAOC,EAAa,CAAA,GAID,iBAHlCA,EAAaC,OAAOC,OAAOF,EAAY,CAAEG,KAAM,OAGzBC,UAEpBJ,EAAWI,QAAU,IAAIC,KAAKC,OAAW,IAAAD,MAA+B,IAArBL,EAAWI,QAAiB,GAAK,GAAK,KAGvFJ,EAAWI,UAEFJ,EAAAI,QAAUJ,EAAWI,QAAQG,eAIpC,MAAAC,EAAmBC,KAAKC,UAAUX,GACpC,QAAQY,KAAKH,KACPT,EAAAS,GAIFT,EAAAa,mBAAmBC,OAAOd,IAGlCD,EAAOc,mBAAmBC,OAAOf,IAAOgB,QAAQ,QAASC,QAGzD,IAAIC,EAAwB,GAM5B,OALAf,OAAOgB,KAAKjB,GAAYkB,SAASpB,IAC/BkB,GAAyB,KAAKlB,IACLkB,GAAA,IAAIhB,EAAWF,GAAMqB,MAAM,KAAK,IAAE,IAGrDC,SAASC,OAAS,GAAGvB,KAAQC,IAAQiB,GAC9C,CAED,UAAOM,CAAIxB,GACH,MAAAyB,EAAUH,SAASC,OAASD,SAASC,OAAOF,MAAM,MAAQ,GAC1DK,EAAS,CAAA,EAeR,OAbCD,EAAAL,SAASO,IACT,MAAAJ,EAASI,EAAGN,MAAM,KACxB,IAAIO,EAAcL,EAAOM,MAAM,GAAGC,KAAK,KAGvC,MAAMC,EAAaR,EAAO,GAAGP,QAAQ,mBAAoBgB,oBAG3CJ,EAAAA,EAAYZ,QAAQ,mBAAoBgB,oBAEtDN,EAAOK,GAAcH,CAAA,IAGhB5B,EAAO0B,EAAO1B,GAAQ0B,CAC9B,CAED,aAAOO,CAAOjC,GACZkC,KAAKnC,IAAIC,EAAM,GAAI,CAAEM,YACtB,CAED,uBAAO6B,CAAiBC,GAGtB,IAF4BF,KAAKV,IAAI,kBAEb,CAChB,MAAAa,EAAef,SAASgB,eAAeF,GAC7C,GAAIC,EAAc,CACF,IAAIE,IAAIC,MAAMH,GACtBI,OAEOJ,EAAAK,iBAAiB,mBAAmB,KAC/CR,KAAKnC,IAAI,kBAAkB,EAAO,CAAEO,QAAS,KAAK,GAErD,CACF,CACF,CAED,uBAAOqC,CAAiBP,EAAInC,GAC1B,MACM2C,GADUpC,OAAO0B,KAAKV,IAAI,mBAAqB,GACxB,EAI7B,GAFAU,KAAKnC,IAAI,gBAAiB6C,EAAY,CAAEtC,QAAS,MAE7CsC,IAAe3C,EAAO,CAClB,MAAAoC,EAAef,SAASgB,eAAeF,GAE7C,GAAIC,EAAc,CACF,IAAIE,IAAIC,MAAMH,GACtBI,MACP,CACF,CACF"}