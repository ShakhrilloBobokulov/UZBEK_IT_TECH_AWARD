!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Treetable=e()}(this,(function(){"use strict";const t=(t,e,n)=>{Object.keys(n).forEach((o=>{const r=n[o],s=e[o],i=s&&((a=s)[0]||a).nodeType?"element":(t=>null==t?`${t}`:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase())(s);var a;if(!new RegExp(r).test(i))throw new Error(`${t.toUpperCase()}: Option "${o}" provided type "${i}" but expected type "${r}".`)}))},e=(()=>{const t={};let e=1;return{set(n,o,r){void 0===n[o]&&(n[o]={key:o,id:e},e++),t[n[o].id]=r},get(e,n){if(!e||void 0===e[n])return null;const o=e[n];return o.key===n?t[o.id]:null},delete(e,n){if(void 0===e[n])return;const o=e[n];o.key===n&&(delete t[o.id],delete e[n])}}})(),n={setData(t,n,o){e.set(t,n,o)},getData:(t,n)=>e.get(t,n),removeData(t,n){e.delete(t,n)}};function o(t){return"true"===t||"false"!==t&&(t===Number(t).toString()?Number(t):""===t||"null"===t?null:t)}function r(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const s={setDataAttribute(t,e,n){t.setAttribute(`data-${r(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-${r(e)}`)},getDataAttributes(t){if(!t)return{};const e={...t.dataset};return Object.keys(e).forEach((t=>{e[t]=o(e[t])})),e},getDataAttribute:(t,e)=>o(t.getAttribute(`data-${r(e)}`)),offset(t){const e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},position:t=>({top:t.offsetTop,left:t.offsetLeft}),style(t,e){Object.assign(t.style,e)},toggleClass(t,e){t&&(t.classList.contains(e)?t.classList.remove(e):t.classList.add(e))},addClass(t,e){t.classList.contains(e)||t.classList.add(e)},addStyle(t,e){Object.keys(e).forEach((n=>{t.style[n]=e[n]}))},removeClass(t,e){t.classList.contains(e)&&t.classList.remove(e)}};let i=Element.prototype.querySelectorAll,a=Element.prototype.querySelector;const l=(()=>{const t=new CustomEvent("Bootstrap",{cancelable:!0}),e=document.createElement("div");return e.addEventListener("Bootstrap",(()=>null)),t.preventDefault(),e.dispatchEvent(t),t.defaultPrevented})(),c=/:scope\b/;(()=>{const t=document.createElement("div");try{t.querySelectorAll(":scope *")}catch(e){return!1}return!0})()||(i=function(t){if(!c.test(t))return this.querySelectorAll(t);const e=Boolean(this.id);e||(this.id=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})("scope"));let n=null;try{t=t.replace(c,`#${this.id}`),n=this.querySelectorAll(t)}finally{e||this.removeAttribute("id")}return n},a=function(t){if(!c.test(t))return this.querySelector(t);const e=d.call(this,t);return void 0!==e[0]?e[0]:null});const d=i,u=a,f={closest:(t,e)=>t.closest(e),matches:(t,e)=>t.matches(e),find:(t,e=document.documentElement)=>[].concat(...d.call(e,t)),findOne:(t,e=document.documentElement)=>u.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let o=t.parentNode;for(;o&&o.nodeType===Node.ELEMENT_NODE&&3!==o.nodeType;)this.matches(o,e)&&n.push(o),o=o.parentNode;return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(this.matches(n,e))return[n];n=n.nextElementSibling}return[]}},h=(()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-no-jquery")?t:null})(),p=/[^.]*(?=\..*)\.|.*/,b=/\..*/,g=/::\d+$/,m={};let y=1;const E={mouseenter:"mouseover",mouseleave:"mouseout"},v=["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"];function A(t,e){return e&&`${e}::${y++}`||t.uidEvent||y++}function w(t){const e=A(t);return t.uidEvent=e,m[e]=m[e]||{},m[e]}function L(t,e,n=null){const o=Object.keys(t);for(let r=0,s=o.length;r<s;r++){const s=t[o[r]];if(s.originalHandler===e&&s.delegationSelector===n)return s}return null}function _(t,e,n){const o="string"==typeof e,r=o?n:e;let s=t.replace(b,"");const i=E[s];i&&(s=i);return v.indexOf(s)>-1||(s=t),[o,r,s]}function O(t,e,n,o,r){if("string"!=typeof e||!t)return;n||(n=o,o=null);const[s,i,a]=_(e,n,o),l=w(t),c=l[a]||(l[a]={}),d=L(c,i,s?n:null);if(d)return void(d.oneOff=d.oneOff&&r);const u=A(i,e.replace(p,"")),f=s?function(t,e,n){return function o(r){const s=t.querySelectorAll(e);for(let{target:e}=r;e&&e!==this;e=e.parentNode)for(let i=s.length;i--;"")if(s[i]===e)return o.oneOff&&x.off(t,r.type,n),n.apply(e,[r]);return null}}(t,n,o):function(t,e){return function n(o){return n.oneOff&&x.off(t,o.type,e),e.apply(t,[o])}}(t,n);f.delegationSelector=s?n:null,f.originalHandler=i,f.oneOff=r,f.uidEvent=u,c[u]=f,t.addEventListener(a,f,s)}function S(t,e,n,o,r){const s=L(e[n],o,r);s&&(t.removeEventListener(n,s,Boolean(r)),delete e[n][s.uidEvent])}const x={on(t,e,n,o){O(t,e,n,o,!1)},one(t,e,n,o){O(t,e,n,o,!0)},off(t,e,n,o){if("string"!=typeof e||!t)return;const[r,s,i]=_(e,n,o),a=i!==e,l=w(t),c="."===e.charAt(0);if(void 0!==s){if(!l||!l[i])return;return void S(t,l,i,s,r?n:null)}c&&Object.keys(l).forEach((n=>{!function(t,e,n,o){const r=e[n]||{};Object.keys(r).forEach((s=>{if(s.indexOf(o)>-1){const o=r[s];S(t,e,n,o.originalHandler,o.delegationSelector)}}))}(t,l,n,e.slice(1))}));const d=l[i]||{};Object.keys(d).forEach((n=>{const o=n.replace(g,"");if(!a||e.indexOf(o)>-1){const e=d[n];S(t,l,i,e.originalHandler,e.delegationSelector)}}))},trigger(t,e,n){if("string"!=typeof e||!t)return null;const o=e.replace(b,""),r=e!==o,s=v.indexOf(o)>-1;let i,a=!0,c=!0,d=!1,u=null;return r&&h&&(i=h.Event(e,n),h(t).trigger(i),a=!i.isPropagationStopped(),c=!i.isImmediatePropagationStopped(),d=i.isDefaultPrevented()),s?(u=document.createEvent("HTMLEvents"),u.initEvent(o,a,!0)):u=new CustomEvent(e,{bubbles:a,cancelable:!0}),void 0!==n&&Object.keys(n).forEach((t=>{Object.defineProperty(u,t,{get:()=>n[t]})})),d&&(u.preventDefault(),l||Object.defineProperty(u,"defaultPrevented",{get:()=>!0})),c&&t.dispatchEvent(u),u.defaultPrevented&&void 0!==i&&i.preventDefault(),u}},T={button:'<button type="button"  class="btn btn-link btn-rounded p-0 mx-n3 my-1 position-absolute"></button>',downArrow:'<i class="fas fa-angle-down fa-lg" aria-hidden="true"></i>',rightArrow:'<i class="fas fa-angle-right fa-lg" aria-hidden="true"></i>',insertDownArrow(t){t.insertAdjacentHTML("afterbegin",this.downArrow)},insertRightArrow(t){t.insertAdjacentHTML("afterbegin",this.rightArrow)},insertDownButton(t){t.insertAdjacentHTML("afterbegin",`<button type="button"  class="btn btn-link btn-rounded p-0 mx-n3 my-1 position-absolute">${this.downArrow}</button>`)},insertRightButton(t){t.insertAdjacentHTML("afterbegin",`<button type="button"  class="btn btn-link btn-rounded p-0 mx-n3 my-1 position-absolute">${this.rightArrow}</button>`)}};function j(t,e){const n=[];return t.forEach((t=>{parseInt(t.getAttribute("data-depth"),10)===parseInt(e,10)&&n.push(t)})),n}function D(t,e){const n=[];for(t=t.nextElementSibling;t&&!t.matches(e);)t.matches("tr")?(n.push(t),t=t.nextElementSibling):t=t.nextElementSibling;return n}function $(t,e){const n=[];for(t=t.nextElementSibling;t&&!(t.getAttribute("data-depth")&&t.getAttribute("data-depth")<=e);)t.matches("tr")?(n.push(t),t=t.nextElementSibling):t=t.nextElementSibling;return n}function M(t){t.forEach((t=>{t.classList.contains("hidden")&&t.classList.contains("hidden")&&t.classList.remove("hidden")}))}const k="treetable",H="mdb.treetable",C={},P={},N=`.${k} tbody`,I=`.${k} tr`,q=`.${k} td`,R="button",B=`expand.mdb.${k}`,z=`collapse.mdb.${k}`;class J{constructor(t,e={}){this.name=k,this._element=t,e.fromJSON&&this._element.appendChild(this._changeTableObjectIntoHTML(e.fromJSON)),this._tbody=f.findOne(N),this._options=this._getConfig(e),this._element&&(this._expandables=function(t){const e=[];return t.querySelectorAll("tr").forEach((t=>{t.hasAttribute("data-depth")&&e.push(t)})),e}(this._element),this._rows=f.find(I,this._element),n.setData(t,H,this),this._init())}get options(){const e={...C,...s.getDataAttributes(this._element),...this._options};return t(k,e,P),e}dispose(){n.removeData(this._element,H),this._element=null,this._expandables.forEach((t=>{const e=f.findOne(R,t);x.off(e,"click")}))}expandAll(){this._expandables.filter((t=>1===s.getDataAttribute(t,"depth"))).forEach((t=>{if(!t.nextElementSibling.classList.contains("hidden"))return;const e=s.getDataAttributes(t).depth,n=j(this._expandables,e+1),o=f.closest(t,I),r=$(o,e),i=D(o,"tr[data-depth]"),a=f.findOne(R,t);this._collapse(r,i,n,a)}))}collapseAll(){this._expandables.filter((t=>1===s.getDataAttribute(t,"depth"))).forEach((t=>{if(t.nextElementSibling.classList.contains("hidden"))return;const e=s.getDataAttributes(t).depth,n=j(this._expandables,e+1),o=f.closest(t,I),r=$(o,e),i=D(o,"tr[data-depth]"),a=f.findOne(R,t);this._collapse(r,i,n,a)}))}_init(){this._render(),this._listenersSetup()}_listenersSetup(){this._expandables.forEach((t=>{const e=s.getDataAttributes(t).depth,n=$(f.closest(t,I),e),o=j(n,e+1),r=D(f.closest(t,I),"tr[data-depth]"),i=f.findOne(R,t);x.on(i,"click",(()=>{this._collapse(n,r,o,i)}))}))}_render(){!function(t){let e;t.forEach((t=>{t.hasAttribute("data-depth")&&(e=25*t.getAttribute("data-depth")),t.firstElementChild.style.paddingLeft=`${e}px`}))}(this._rows),this._expandables.forEach((t=>{const e=f.findOne("td",t);e.querySelector("button")||T.insertDownButton(e)})),f.find(q,this._element).forEach((t=>{const e=`<div>${t.innerHTML}</div>`;t.innerHTML=e}))}_setArrowsPositionInRow(t){t.forEach((t=>{const e=f.find(R,t);e&&(e[0].innerHTML=T.rightArrow)}))}_setArrowPosition(t,e){t.every((t=>t.classList.contains("hidden")))?e.innerHTML=T.rightArrow:e.innerHTML=T.downArrow}_getConfig(e){const n={...C,...s.getDataAttributes(this._element),...e};return t(k,n,P),n}_collapse(t,e,n,o){t.every((t=>t.classList.contains("hidden")))?(M(e),M(n),this._setArrowPosition(t,o),this._setArrowsPositionInRow(n),x.trigger(o,B,{firstRows:e,nestedRows:t})):(t.forEach((t=>{t.classList.contains("hidden")||t.classList.contains("hidden")||t.classList.add("hidden")})),this._setArrowPosition(t,o),x.trigger(o,z,{firstRows:e,nestedRows:t}))}_changeTableObjectIntoHTML(t){const e=document.createElement("div");e.classList.add("treetable"),e.insertAdjacentHTML("beforeend",'<table class="table"><thead><tr></tr></thead><tbody></tbody></table>');const n=f.findOne("tbody",e),o=f.findOne("thead tr",e),r=(t,e)=>{n.insertAdjacentHTML("beforeend","<tr></tr>");const o=f.find("tr",n);t.data.forEach((t=>{o[o.length-1].insertAdjacentHTML("beforeend",`<td>${t}</td>`)})),e&&(o[o.length-1].dataset.depth=e)},s=(t,e)=>{Object.keys(t).find((t=>"children"===t))?(r(t,e),t.children.forEach((t=>{s(t,e+1)}))):r(t)};var i;return i=t.columns,o.insertAdjacentHTML("beforeend","<tr></tr>"),i.forEach((t=>{o.insertAdjacentHTML("beforeend",`<th>${t}</th>`)})),t.row.forEach((t=>{s(t,1)})),e}static get NAME(){return k}static jQueryInterface(t,e,o){return this.each((function(){let r=n.getData(this,H);const s="object"==typeof t&&t;if((r||!/dispose/.test(t))&&(r||(r=new J(this,s,e)),"string"==typeof t)){if(void 0===r[t])throw new TypeError(`No method named "${t}"`);r[t](e,o)}}))}static getInstance(t){return n.getData(t,H)}}return f.find("[data-mdb-treetable-init]").forEach((t=>{let e=J.getInstance(t);e||(e=new J(t))})),J}));
//# sourceMappingURL=treetable.min.js.map
